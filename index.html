<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°Ù‡Ø¨ Ø§Ù„Ø±Ù‚Ù…ÙŠ</title>
  <style>
    body {
      direction: rtl;
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      padding: 20px;
    }
    h2 {
      color: #222;
    }
    label, select, input, button {
      display: block;
      width: 100%;
      margin: 10px 0;
      font-size: 16px;
    }
    button {
      background-color: #007bff;
      color: white;
      padding: 10px;
      border: none;
      cursor: pointer;
      margin-top: 10px;
    }
    .result {
      background-color: #fff;
      border: 1px solid #ccc;
      padding: 15px;
      margin-top: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    th, td {
      border: 1px solid #aaa;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #eee;
    }
  </style>
</head>
<body>

  <h2>ğŸ“Š Ø£Ø¯Ø§Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ù„Ù„Ø°Ù‡Ø¨</h2>

  <label>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ:
    <input type="number" id="price" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠØŒ Ù…Ø«Ø§Ù„: 3432.5" step="0.1">
  </label>

  <label>Ø§Ø®ØªØ± Ø§Ù„ÙØ±ÙŠÙ… Ø§Ù„Ø²Ù…Ù†ÙŠ:
    <select id="tf">
      <option value="1m">1 Ø¯Ù‚ÙŠÙ‚Ø©</option>
      <option value="5m">5 Ø¯Ù‚Ø§Ø¦Ù‚</option>
      <option value="15m">15 Ø¯Ù‚ÙŠÙ‚Ø©</option>
      <option value="30m">30 Ø¯Ù‚ÙŠÙ‚Ø©</option>
      <option value="1h">Ø³Ø§Ø¹Ø©</option>
      <option value="4h">4 Ø³Ø§Ø¹Ø§Øª</option>
      <option value="1d">ÙŠÙˆÙ…ÙŠ</option>
    </select>
  </label>

  <button onclick="analyze()">ğŸ” ØªØ­Ù„ÙŠÙ„</button>
  <button onclick="copyToClipboard()">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„ØªÙˆØµÙŠØ©</button>
  <button onclick="shareOnWhatsApp()">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨</button>

  <div class="result" id="output">ğŸ‘‡ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù„ÙŠÙ„</div>

  <script>
    let lastMessage = '';

    function analyze() {
      const priceInput = document.getElementById('price').value;
      const P = parseFloat(priceInput);
      const tfSelect = document.getElementById('tf');
      const tfText = tfSelect.options[tfSelect.selectedIndex].text;

      if (isNaN(P)) {
        document.getElementById('output').innerHTML = 'âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± ØµØ§Ù„Ø­.';
        return;
      }

      const base = 3185;
      const step = 45;
      const diff = P - base;
      const ratio = diff / step;
      const angle = ratio * step;

      const nextStep = Math.ceil(ratio);
      const prevStep = Math.floor(ratio);

      const resistance = base + nextStep * step;
      const support = base + prevStep * step;

      let signal = (ratio % 2 < 1) ? 'UP' : 'DOWN';

      let recommendation = '';
      if (signal === 'UP') {
        if (angle >= 315) {
          recommendation = 'ğŸ“Œ Ø§Ù„Ø³Ø¹Ø± ÙÙŠ ØªØ´Ø¨Ø¹ ØµØ¹ÙˆØ¯ÙŠ â€“ Ø§Ù†ØªØ¨Ù‡ Ù„Ù„Ù…Ø®Ø§Ø·Ø±.';
        } else if (P >= resistance - 1) {
          recommendation = 'âœ… Ù…Ù…ÙƒÙ† Ø¯Ø®ÙˆÙ„ Ø´Ø±Ø§Ø¡ Ø¨Ø¹Ø¯ ØªØ£ÙƒÙŠØ¯ Ø§Ø®ØªØ±Ø§Ù‚ Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…Ø©.';
        } else {
          recommendation = 'ğŸ“ˆ ÙØ±ØµØ© Ø´Ø±Ø§Ø¡ Ù…Ù…ÙƒÙ†Ø© ÙÙˆÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ù…Ø¹ Ø¥Ø¯Ø§Ø±Ø© Ù…Ø®Ø§Ø·Ø±.';
        }
      } else {
        if (P <= support + 1) {
          recommendation = 'ğŸ”» Ø¯Ø®ÙˆÙ„ Ø¨ÙŠØ¹ Ù…Ù…ÙƒÙ† Ø¨ÙƒØ³Ø± Ø§Ù„Ø¯Ø¹Ù….';
        } else if (angle >= 225 && angle <= 270) {
          recommendation = 'âš ï¸ Ù…Ù…ÙƒÙ† Ø§Ø±ØªØ¯Ø§Ø¯ â€“ Ù„Ø§ ØªØ¯Ø®Ù„ Ø¨Ø¯ÙˆÙ† ØªØ£ÙƒÙŠØ¯.';
        } else {
          recommendation = 'âŒ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ù‡Ø§Ø¨Ø· ÙˆÙ„Ø§ ØªÙˆØ¬Ø¯ ÙØ±ØµØ© Ù…Ø¤ÙƒØ¯Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.';
        }
      }

      let table = '<table><tr><th>Ø§Ù„Ø²Ø§ÙˆÙŠØ©</th><th>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„</th></tr>';
      for (let i = 0; i <= 360; i += step) {
        const level = base + (i / step) * step;
        table += `<tr><td>${i}Â°</td><td>${level.toFixed(2)}</td></tr>`;
      }
      table += '</table>';

      // ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù†Øµ Ø§Ù„Ù‚Ø§Ø¨Ù„ Ù„Ù„Ù†Ø³Ø®
      lastMessage = `ğŸ” ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°Ù‡Ø¨ (${tfText})\n` +
        `Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ: ${P.toFixed(2)}\n` +
        `Ø§Ù„Ø¥Ø´Ø§Ø±Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©: ${signal}\n` +
        `Ø§Ù„Ø²Ø§ÙˆÙŠØ©: ${angle.toFixed(1)}Â°\n` +
        `Ù…Ù‚Ø§ÙˆÙ…Ø© Ù‚Ø±ÙŠØ¨Ø©: ${resistance.toFixed(2)}\n` +
        `Ø¯Ø¹Ù… Ù‚Ø±ÙŠØ¨: ${support.toFixed(2)}\n` +
        `ğŸ“Œ Ø§Ù„ØªÙˆØµÙŠØ©: ${recommendation}`;

      // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
      document.getElementById('output').innerHTML = `
        <strong>Ø§Ù„ÙØ±ÙŠÙ…:</strong> ${tfText}<br>
        <strong>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ:</strong> ${P.toFixed(2)}<br>
        <strong>Ø§Ù„Ø¥Ø´Ø§Ø±Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©:</strong> ${signal}<br>
        <strong>Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</strong> ${angle.toFixed(1)}Â°<br>
        <strong>Ø£Ù‚Ø±Ø¨ Ù…Ù‚Ø§ÙˆÙ…Ø©:</strong> ${resistance.toFixed(2)}<br>
        <strong>Ø£Ù‚Ø±Ø¨ Ø¯Ø¹Ù…:</strong> ${support.toFixed(2)}<br><br>
        <strong>ğŸ§  Ø§Ù„ØªÙˆØµÙŠØ©:</strong> ${recommendation}
        <br><br>
        ${table}
      `;
    }

    function copyToClipboard() {
      if (lastMessage) {
        navigator.clipboard.writeText(lastMessage).then(() => {
          alert('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„ØªÙˆØµÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');
        });
      } else {
        alert('âš ï¸ Ù‚Ù… Ø£ÙˆÙ„Ø§Ù‹ Ø¨Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØµÙŠØ©.');
      }
    }

    function shareOnWhatsApp() {
      if (lastMessage) {
        const encoded = encodeURIComponent(lastMessage);
        const url = `https://wa.me/?text=${encoded}`;
        window.open(url, '_blank');
      } else {
        alert('âš ï¸ Ù‚Ù… Ø¨Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙˆØµÙŠØ©.');
      }
    }
  </script>

</body>
</html>
